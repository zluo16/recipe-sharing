<h1><%= @recipe.name %></h1>
<h4>made by <%= @author.name %></h4>

<div>
  <% if current_user == @recipe.author%>
    <a class="btn" href="<%= edit_recipe_path(@recipe)%>">Edit</a>
    <a class="btn" href="<%= edit_recipe_path(@recipe)%>">Delete Recipe</a>
  <% else %>
  <!-- THIS BUTTON IS NOT YET WORKING WORKING ON IT NOW -->
    <%= link_to "Save Recipe", new_saver_recipe_path(saver_id: current_user.id, saved_recipe_id: @recipe.id) %>
  <% end %>
</div>

<div>
  <h5>Overview </h5>
  <p>Prep Time: <%= @recipe.prep_time %> minutes</p>
  <p>Cook Time: <%= @recipe.cook_time %> minutes</p>
  <p><strong>Total Time: <%= "#{@recipe.prep_time + @recipe.cook_time}" %> minutes</strong></p>
</div>


<div>
  <h5>Ingredients: </h5>
  <% if @recipe.ingredients.count > 0 %>
    <ul>
      <% @recipe.recipe_ingredients.each do |i| %>
        <li><%= i.quantity %> <%= i.units%> â€” <%= i.ingredient.name %> <%= link_to "Delete", i, method: :delete %></li>
      <% end %>
    </ul>
  <% end %>
  <% if current_user == @recipe.author%>
  <!-- Modal Trigger -->
    <a class="modal-trigger waves-effect waves-light btn" href="#add_recipe_ingredient_modal">Add Ingredient</a>

    <!-- Modal Structure -->
    <div id="add_recipe_ingredient_modal" class="modal modal-fixed-footer">
      <div class="modal-content">
        <h4>Add Ingredient to <%=@recipe.name%></h4>
        <%= form_for(@recipe_ingredient) do |t| %>
          <%= t.hidden_field :recipe_id, value: @recipe.id %><br>
          <%= t.collection_select :ingredient_id, Ingredient.all, :id, :name, { prompt: "Choose an ingredient" }%><br>

          <%= t.number_field :quantity, placeholder: 'Quantity' %>
          <%= t.select :units, ['Cup(s)', 'Gram(s)', 'Kilogram(s)', 'Liter(s)', 'Mililiter(s)', 'Pound(s)', 'Ounce(s)', 'Pint(s)', 'Teaspoon(s)', 'Tablespoon(s)'], { prompt: "Choose a unit of measure" }%><br><br>

          <%= t.submit "Add Ingredient to Recipe " %>
        <% end %>
      </div>
    </div>
  <% end %>


</div>


<div>
  <h5>Instructions: </h5>
  <%= simple_format @recipe.instructions %>
</div><br>
